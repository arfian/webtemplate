<!-- widget -->
<script src="/static/asset/js/main/designer.js"></script>
<script>viewModel.header.PageID = "{{.pageID}}"</script>

<script type="text/template" id="template-panel">
	<div class="grid-item" data-ss-colspan="10">
		<div class="panel panel-custom">
			<div class="panel-heading">
				<h3 class="panel-title">Panel 1</h3>
				<span class="pull-right clickable">
					<i class="fa fa-close"></i>
				</span>
				<span class="pull-right clickable">
					<i class="fa fa-gear"></i>
				</span>
				<span class="pull-right clickable">
					<i class="fa fa-chevron-up hideshow" onClick="viewModel.designer.hideShow(this)"></i>
				</span>
			</div>
			<div class="panel-body">Panel content</div>
		</div>
	</div>
</script>

<script type="text/template" id="template-popover">
	<div class="popover" role="tooltip" style="width: 300px;">
		<div class="arrow"></div>
		<h3 class="popover-title"></h3>
		<div class="popover-content"></div>
	</div>
</script>

<script type="text/template" id="template-content-popover-panel">
	<form class="form-horizontal page-form" data-bind="with: viewModel.designer.panelConfig">
		<div class="form-group">
			<label class="col-sm-2 control-label">Title</label>
			<div class="col-sm-10">
				<input required name="Title" type="text" class="form-control input-sm" data-bind="value: title" />
				<span class="k-invalid-msg" data-for="Title"></span>
			</div>
		</div>
		<div class="form-group">
			<label class="col-sm-2 control-label">Width</label>
			<div class="col-sm-10">
				<select style="width: 100%;" data-bind="kendoDropDownList: { data: viewModel.designer.optionPanelWidth, value: width }"></select>
			</div>
		</div>
		<div class='pull-right' style="margin-top: 0px;">
			<button data-bind="click: viewModel.designer.createPanel" class='btn btn-sm btn-success'>
				<span class='glyphicon glyphicon-save'></span> Save
			</button>
		</div>
	</form>
</script>

<script type="text/template" id="template-content-popover-widget">
	<form class="form-horizontal page-form" data-bind="with: viewModel.designer.widgetConfig">
		<div class="form-group">
			<label class="col-sm-12 control-label" style="text-align: left;">Title:</label>
			<div class="col-sm-12">
				<input required name="Title" type="text" class="form-control input-sm" data-bind="value: title" />
				<span class="k-invalid-msg" data-for="Title"></span>
			</div>
		</div>
		<div class="form-group">
			<label class="col-sm-12 control-label" style="text-align: left;">Type:</label>
			<div class="col-sm-12">
				<select name="type" style="width: 100%;" data-bind="kendoDropDownList: { data: viewModel.designer.optionWidgetType, value: type, dataValueField: 'value', dataTextField: 'title', change: viewModel.designer.changePopupWidgetSelectedTypeValue }"></select>
			</div>
		</div>
		<div class="form-group">
			<label class="col-sm-12 control-label" style="text-align: left;">Widget:</label>
			<div class="col-sm-12">
				<select name="widget" required data-required-msg="Select widget" style="width: 100%;" data-bind="kendoDropDownList: { data: viewModel.designer.optionWidgetID, value: widgetID, optionLabel: 'Select one', dataValueField: 'value', dataTextField: 'title' }"></select>
                <span class="k-invalid-msg" data-for="widget"></span>
			</div>
		</div>
		<div class="form-group">
			<label class="col-sm-12 control-label" style="text-align: left;">Data Source:</label>
			<div class="col-sm-12">
				<select name="datasource" required data-required-msg="Select data source" style="width: 100%;" data-bind="kendoDropDownList: { data: viewModel.designer.optionDataSources, value: dataSource, optionLabel: 'Select one', dataValueField: 'value', dataTextField: 'title' }"></select>
                <span class="k-invalid-msg" data-for="datasource"></span>
			</div>
		</div>
		<div class='pull-right' style="margin-top: 0px;">
			<button data-bind="click: viewModel.designer.createWidget" class='btn btn-sm btn-success'>
				<span class='glyphicon glyphicon-save'></span> Save
			</button>
		</div>
	</form>
</script>

<div class="container-fluid content-main chart-widget" data-bind="visible: mode() == '', with: designer">
	<div class="content-header">
		<div class="row">
			<div class="col-md-12 title-content">
				<span class="col-md-3">Page Designer</span>
				<div class="col-md-9">
					<div class="btn-group btn-sm">
						<button class="btn btn-sm btn-success btn-popover btn-set-datasource">
							<span class="fa fa-database"></span> Set Data Source
						</button>
					</div>
					<div class="btn-group btn-sm">
						<button class="btn btn-sm btn-primary btn-popover btn-add-panel">
							<span class="glyphicon glyphicon-plus"></span> Add Panel
						</button>
						<button class="btn btn-sm btn-primary btn-popover btn-add-widget">
							<span class="glyphicon glyphicon-plus"></span> Add Widget
						</button>
					</div>
				</div>
			</div>
		</div>
	</div>

	<div class="content-body content-panel" data-overlay-page-wrap>
		<div class="grid-container"></div>
	</div>
</div>